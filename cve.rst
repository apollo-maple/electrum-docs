Electrum2.6から3.0.4までのJSONRPCの脆弱性
=======================================

1月6日、Electrumウォレット内の脆弱性が開示され、それはWebブラウザで実行されるJSONRPCを通したウォレットコマンドの実行を悪意あるWebサイトに可能とするものでした。そのバグはバージョン2.6から3.0.4の全てのプラットフォーム上のElectrumに影響します。Electrum CashのようにElectrumのクローンにもまた影響します。


資金が盗まれるの？
----------------

パスワードで保護されていないウォレットは、もしそれらが3.0.5未満のバージョンのElectrumをWebブラウザがアクティブな状態でオープンしていた場合、盗難のリスクにあります。

加えて、その脆弱性はユーザー設定、ウォレット内のアドレス帳、ユーザーインターフェイスの"送信先"、"金額"フィールドをElectrumが実行中に変更することを攻撃者に可能にします。

この脆弱性によるBitcoin盗難の発生は知られていませんが、脆弱性が公になってから今ではリスクは相当大きくなっています。

walletデータが漏れる可能性はあるのか？

はい、攻撃者はプライベートなデータ、例えばBitcoinアドレス、トランザクションラベル、アドレスラベル、ウォレットのアドレス帳やマスター公開鍵を手に入れることができます。



パスワードで保護されたウォレットにブルートフォース（総当たり）攻撃されることはないの？
-------------------------------------------------------------------

現実的ではありません。この脆弱性は効率的なブルートフォース攻撃をするのに必要な暗号化済Seedや秘密鍵に攻撃者がアクセスすることを許すわけではありません。暗号化済Seedなしでは攻撃者は、ユーザーが悪意あるページにアクセスしていてもJSONRPCインターフェイスを通してパスワードにトライしなければなりません。これは暗号化済Seedを用いる攻撃の数桁倍遅く、時間の制限を受けます。弱いパスワードだとしてもそれに対して防御します。


ユーザーは何をするべきなの？
-------------------------

全てのユーザーは彼らのElectrumソフトウェアをアップグレードし、旧バージョンの使用をストップする必要があります。

ウォレットをパスワードで保護していないユーザーは新しいウォレットを作成し、資金をそのウォレットに移さなければなりません。たとえ資金を受け取ったことがなくてもパスワードなしのウォレットはいかなる場合も使用すべきではありません。なぜならSeedが感染しているかもしれないからです。

加えて、ユーザーは彼らの設定を見直し、アドレス帳からすべての送信先を削除しなければなりません。なぜなら、それらのアドレス帳のBitcoinアドレスは改ざんされているかもしれないからです。


Electrumのアップグレード方法
--------------------------

3.0.5未満のいかなるバージョンのElectrumも実行を停止し、最新バージョンをインストールしてください。デスクトップでは、あなたがそれ以外のサイトではなくhttps://electrum.orgからダウンロードしたことを確かめて下さい。AndroidではGoogle Playで最新バージョンは利用可能です。

もしElectrum3.0.5（または他の新しいバージョン）がインストールできない、またはあなたのコンピュータで動かない場合、そのコンピュータでElectrumを使用するのは停止して、Electrum3.0.5が実行可能な端末から資金にアクセスしてください。もしあなたが本当にElectrumの旧バージョンを使わなければならない場合、例えばウォレットSeedにアクセスする場合、コンピュータがオフラインであること、Webブラウザがそのコンピュータ上で同時に実行していないことを確認してください。


すべてのユーザーが新しいアドレスに資金を移さなければならないの？
---------------------------------------------------------

いいえ、パスワードで保護されたウォレットから資金を移動することは勧めません。


問題はいつ報告されていつ修正されたの？
----------------------------------

JSONRPCインターフェイス内のパスワード保護の欠乏は11月25日にユーザーであるjsmadから報告されました。
https://github.com/spesmilo/electrum/issues/3374

jsmadの報告はElectrumデーモン、Webサーバ上で実行していて、Bitcoinの支払いを受け取るために業者に使用されているソフトウェアの一つについてでした。その状況でデーモンへの外の世界からの接続は'rpchost'と'rpcport'をElectrumに設定して明白に権限を与えられている必要があります。

2018年の1月6日、Tavis OrmandyがJSONRPCインターフェイスがElectrum GUIに対して悪用される可能性があること、Javascriptで特別に作成されたWebページに訪れることでローカルで実行されているWebブラウザによる攻撃が実行されることのデモンストレーションをしました。

Tavisの投稿に続いて我々は新バージョン(3.0.4）をリリースしました。mithrandi(Debian Packager)によって書かれたパッチが充てられていてTavisによってデモされた攻撃に対処しています。加えて、mithrandiのパッチはJSONRPCインターフェイスへのパスワード保護は追加されていなかったためGithub issueは開いたままでした。

3.0.4のリリース直後、デーモンのJSONRPCインターフェイスに対する適切なパスワード保護の追加に取り組み始めました。そのパートは1月7日、日曜日に始まりました。日曜の午後に最初のパッチはPOSTを使ったような同じような攻撃に対して効果的でないことを知りました。これが我々が3.0.5のリリースに遅れた理由であり、リリースにはパスワード保護とGUIにおける完全なJSONRPCの無効化を含んでいました。
